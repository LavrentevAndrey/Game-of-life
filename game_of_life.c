// ..........................................Yk&.............................../Q..........^[W,'........................................,Yd#M?^..........
// .........,l<l,............................XkW...........................................zz.W_..........i'.......................~'...&Zj..rr..........
// .........tObc1..<^........................rQw...........................................ju~w<..........@;........ll...........,!$;...8?...............
// ........!tc.....&)I........................................................!:............~q..........:!$-:......~LY..........i/0k,...q~...............
// ........Onl~l,..&Zr.......................................................~U1..............<^......../0kC1...Ii<qQv<.Ii<<ll!.JUp.!,......<^...........
// ........cCcbc/i>w>........................................................k_il.............&_...."!.!r0......YkW>i}q<JkWWcvX..-U.p1....^<q<...........
// .............1hM...........................................................XmO.............&-....?U+Cvc......jOWWOj.mJLwm!!>+....p1....>m.............
// .............?QM<^.........'+................................~..............1v.............m<......b,...!i!...>mm}I..II..cvCb....p1...................
// ..........'~..,mW+.........:$!".~i!l...^<....................q..........................................cCX~.....xr..XX..lli.....p1...........II......
// ........li+d.,i>M1I........:$Y?.bbQv..I1M...............'~.,!..........................<^..........~'.....,d.........jj..0Qq.ill~J?........^<.rj.~'...
// .......|rnf..+c*XmX........^L....x+...zpM..............."@`_r).......................:)X(+.........@:...?[?|.........+}).ftx.xt/L".........+M...`C}i..
// .......X{i`|.."v.Xz.....):l[....\`....c0v...........`|-!^Y'..M):.....................+M.cc.........Y^...\j\X.........1rc...`\]I..........(:lc.....L\..
// ........\_,o_l`}}Yu...:{v!<r)...Y"....{{............"XU)..?I.cvl.....................lc{/{................................I{YL]..........k/]{..,_1Y(..
// ..........^UY(:dcx)...+k...^J..................,]?'...f1_.0[...........................zl........;_.......................~n}Q[..........Xxzk..!/U/-..
// ............/-"c......_M......................._Mo"....~r.j~...................................(}fm\}l......?:..):.........^Jj~............+#):.......
// ......................!v...`\..................lcu^...]!...!]..................................Mz|t%q{.|`...L+..*~........................+f*o~.......
// ....................{,:1..I{X.....!_)`................/)](?1t..................................h/I.#Z}.z}!..|l,{uI........................1jub\~......
// ."??`.........`?....b({c..~j....}-)\Y-,..],"]..........~rUj~............................>-].."]zr~.#Z[..\|~.~,lc.............................cr1......
// .~*o,........l(o....vQL((:......Bp{.\Q-..cllv....................................`\?!...cdM..+#..l[Yj~...-\.L+................................_{?.....
// .;//`.......)|t*rI...?(tMc+.....r(i.jQc/rxI...}}................................<fj})}..?(t..+M..{w....u\/)u{;...........)+................Ix.?(}.....
// ............}(j\/;....lxMn(/.........}()/t;...XOnr^.............................(qv.{On......;/..!1.({1f1)(B.............L|..............nI+M...`v(+..
// .............{m..}tn..;\\;!(v\>.......?(t.....-r#a".....................I)vt+...i\8.{L\.............nfj...`/.............x[..............\//\.}t|&L\..
// .............!1..XQtxI.....:@Z{.......<-}],...}vW\\+....................+0f)/)u`.^j\)?..............lIl..................!:...............??..?(}fQU|.
// ................xOz.#+.....`j{!..........l`..._1/.L\....................+Qv^<)8^...{i.............................................................})}.
// ................/)-.\/}...>tc.!}..............I-1.u{....................:]\{[[b`......................................................................
// ..................In.__.nf({\.+|..............^I!.!,.......................ii!_.....................^".......................`,'...................+|.
// ..................+M..ln/L\^n]<I.....`i<l`........................................................ld$*<.....^:'.......pY'..^O$&[...................|O.
// .............."rxI+M..;\n|>,o~,....,O$8hWWf^......................................................*$+.......v8!.......r)...Q$)....................(Ywv
// ..............'~*Cx+....+r['~.....^$@_...-$c......................................................$Z........Y$i............o*'....................i<<_
// ................*pm0Qi..0{;.......c$].....vJ"...]CmQt:...z?[QZv>'/Z0/,....?LmJ{`........+JmQt:..+m$&U|......Y$i.......n/'!0$$Jf`.')0mX?'..............
// ................+<<+o~>Q*_........p8:..........z$C](8b;..$@U])@%kC?\$L`..C$J?/@Y`......n$Z[{ka<.!f$@t_......Y$i.......$p';f$$r[''b$u-n$j........`Zxzu.
// ................Cz\.h~"++"........dM,.."+++<`..)[...}$[..$O...[$U...u$>.]$x...|$_.....l$C....$O`..$O........Y$i.......$p'..*o'..r${...U&l........_Jri.
// ................+Jz.#+............dM,..-kk$%l..`}cJJ*${..$J...+$\...\$-.J$addd$$1...../$[....0%I..$O........Y$i.......$p'..*o'..d$kddb$$<.........i\v.
// .................l}O+^............O%l.....C$l."8$L/\U${..$J...+$\...\$-.J$j----+".....|$]....O@I..$O........Y$i.......$p'..*o'..d$(----~^..........|0.
// ..................+#Qi....."Y.....<$n'....C$l.[$/...f${..$J...+$\...\$-.?$|...........;$u...'$k`..$O........Y$i.......$p'..*o'..j$?................:_w
// ..................^+~j/..._Xk};....1$O{_}X$b".;$p|/w$$1..$J...+$\...\$-..U@j-[vY`......f$n?)M$+...$O........Y$f1111}:.$p'..*o'...bW\-{Yx'...........'_
// ................0i...cc...{w~;`....."jpoa0{'...>O#d1IO?..0(...lZ_..._L!...?0aaL_........<LaaXI....Q/........)wmZZZZC!.Jj'..un.....)mohY!..............
// ................~^>Z.cc...,>.n([......................................................................................................................
// nOd...........:pdZv;.""......ZXz......................................................................................................................
// .<d...........:qpOn......x),*...................................................,+./+.................................................................
// .~a............,awv......u(,&...........................'f1i.f..................';w^'............i1r/<................;\/.............................
// nv;.............;Uqk.xx..c|.I............................,J].,Z>...........vXnw^..;..............]UaQ}................~ww.............................
// ]"..............."]W.cc.h]`..............................."`.h,'..........#ifL:..................`":"`................',,.............................
// .......................................................................uu.............................................................................
// ...................................................)0o.[0*`....xx......^-Xo:(Y..}Co...................................................................
// ...................................................|pB.{q@`....cqb......',;CmQo^(pB...................................................................
// .............................................qLQd..)O#.`IM`....^-k.rr......"\U*^{Z#.............rcC................................................1Y.
// ..........................................YkM#bX.#,...m\.......zz..zX............;@.............X1....................................................
// ..................................t0$O-....+WW+..MOt..m\..p1.8&bX.8-............|q..............XQp.p0O......................................&kY"$,...
// .....................................Q-........-&.Qt...1b$p{........................1Y...........{q.q1........................................Xk0.....
// ...........................:@...../0@0-.......YkW#,....."$`|L&W_...................w|_&............$:................zkWMQ/:$.........................
// .............................................W+_&#,........(w......................w|_&..............................XkWWQ/:$........&hX..............
// .............................................&hY...........|Q%&_....................1U............................_%&_...O/:$........8hY..............
// .................................................../k$....dQw.W_.................................................._&MdX..............&-+W......-0...;$
// ................................../Q@0-..........M0t;@..............................................................W+-&.........pw0.WkdM.....YX"@,...
// ...............""^`...............)Y*U?^.........k"'^........................................'""^{Q,................"vwh...,M.}0,QCYhbZOh.....uu:oJ|:W
// ..............:dbmu...........'`......nn.........bI|C..'`.```".............................^^_bhm}.M:...``^........^kOmh......}YM:.'k..<k^^^^..+U.U|:#
// ..............................[Q..................CZC..}Z.ZJJh.............................kOn.*+.......UOU.......~kbZv................<boqqo.........
// ..............................1w.wmQ...+M..........\Z........&.............................Wdz.........Bqp0BQbY..._&M+............/Q...+M.....Xz..0pd@
// .................................wmL.O-+#,YU,,'....\O..)b@qLm,.............................Mdp#8k1......""":Q_................1C$;.'*&-+#MdY.&kkQ$l`.:

#include "field.h"
#include <unistd.h> // для sleep()
#define XSIZE 80
#define YSIZE 25

int main() {
    printf("\x1B[37m"); // Белый цвет символа
    printf("\x1B[40m"); // Заливка терминала чёрным
    // Начальная фигура diehard
    char start[YSIZE * XSIZE] = {[1080] = 1, [1079] = 1, [1081] = 1, [1075] = 1, [1154] = 1, [1155] = 1, [1240] = 1};
    // Создаём поле
    Field *field = field_initialisation(start, XSIZE, YSIZE);
    int time = 0; // Время работы программы 
    while (time < 200) {
        
        field_print(field); // Выводим на экран поле
        
        next_gen_calculation(field); // Просчитываем следующее поколение
        
        swap_fields(&(field->gen), &(field->next_gen)); // Переходим к следующему поколению
        
        usleep(200000); // Задержка одна секунда
        time++; // Увеличиваем время
    }
    // Удаляем поля
    field_delition(field);
}
